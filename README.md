# ZookeeperAction
zookeeper distribution description and put it into practice


## 分布式事务介绍
### 分布式事务的特点：ACID(原子性[A]、一致性[C]、隔离性[I]、持久性[D])
### CAP理论：一个分布式系统不可能同时满足一致性(Consistency)、可用性(availability)、分区容错性(Partion tolerance)；
### BASE理论： 基本可用、软状态、最终一致性；
. 基本可用，就是可能牺牲响应时间，功能上的从简； 
. 软状态，就是在执行事务的时候，有个过渡状态，数据是一个中间值；
. 最终一致性，保证数据最后是一致的，但中间过程可能查不到该数据；

### 分布式事务有哪些
#### 分布式可从两层面说起：
1. 数据库层面，对数据进行切片分库，保证一致性，例如对更新数据的请求保存到服务器A的数据库里，对新建数据的请求保存到服务器B的数据库上；优点：简单；缺点：可能产生数据丢失
2. 业务层面，有三种：
   第一种：强一致性，要求实时性高，如文件系统、RDBMS;(二阶段提交协议 原则上是强一致性)
   第二种：弱一致性，你写入一值，可能成功，可能不成功；如微信支付哪种有个响应半衰期，那不保证你的业务是否成功，他只保证他自己的业务成功，并通过消息回调方式 会在间隔有规律的时间推送消息给你，或者你回调他的接口查信息；
   第三种：最终一致性，使用消息队列的方式，异步执行或异步调用保证最终一致性；

#### 分布式事务中的一致性协议  ：
. 二阶段提交协议；（MYSQL默认实现，TCC补偿模式）
. 三阶段提交协议；
. Paxos算法；
. ZAB算法； 

